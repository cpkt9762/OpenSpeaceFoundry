
Traces:
  [4221955] TokenBankTest::setUp()
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266
    ├─ [979929] → new MyToken@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], value: 1000000000000000000000000 [1e24])
    │   └─ ← [Return] 4310 bytes of code
    ├─ [432798] → new TokenBank@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   └─ ← [Return] 2050 bytes of code
    ├─ [1075725] → new MyERC721NFT@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   └─ ← [Return] 5037 bytes of code
    ├─ [182251] MyERC721NFT::mintNFT("https://sapphire-familiar-toucan-190.mypinata.cloud/ipfs/QmWoSUtP6FLVTqfAcBd7RVjNwfVdGAtaUqYDTEsK3LGgyi")
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], tokenId: 0)
    │   ├─ emit MetadataUpdate(_tokenId: 0)
    │   └─ ← [Return] 0
    ├─ [1250014] → new NftMarket@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 5896 bytes of code
    ├─ [25144] MyToken::transfer(ECRecover: [0x0000000000000000000000000000000000000001], 1000000000000000000000 [1e21])
    │   ├─ emit Transfer(from: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], to: ECRecover: [0x0000000000000000000000000000000000000001], value: 1000000000000000000000 [1e21])
    │   └─ ← [Return] true
    └─ ← [Stop] 

  [511596] TokenBankTest::test_PermitBuy()
    ├─ [2616] MyToken::nonces(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::sign("<pk>", 0x4997d093a5fcb84acb0bb5ed760ffb5cbbc22b0bc51b12167024bc76dc16c7c3) [staticcall]
    │   └─ ← [Return] 27, 0x11e0c9edb80fb70b9f82bf0e054021c0bbd189092359b54649bc45768b989bd5, 0x0ca37d427faa3e1d3ee205b155615a53a59ebe5ac6766e3feac8762399fe69a9
    ├─ [3000] PRECOMPILES::ecrecover(0x4997d093a5fcb84acb0bb5ed760ffb5cbbc22b0bc51b12167024bc76dc16c7c3, 27, 8086485828332878161921962109266812842617165044091463639110397138842307566549, 5716614765652596957947115764396136504266486712513789449849071906677002758569) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000007c8999dc9a822c1f0df42023113edb4fdd543266
    ├─ [0] VM::deal(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, 1000000000000000000000 [1e21])
    │   └─ ← [Return] 
    ├─ [2651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   └─ ← [Return] [0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b], []
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], slot: 96242371873675982092976041874824211260794571421386197087839202485518554500971 [9.624e76])
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff)
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0x0000000000000000000000000000000000000000000000000000000000000000)
    │   └─ ← [Return] 
    ├─ emit SlotFound(who: MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], fsig: 0x70a08231, keysHash: 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, slot: 96242371873675982092976041874824211260794571421386197087839202485518554500971 [9.624e76])
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    ├─ [25841] NftMarket::addToWhitelist(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266)
    │   ├─ [0] console::log("addToWhitelist: %s", 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Stop] 
    ├─ [0] VM::prank(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266)
    │   └─ ← [Return] 
    ├─ [24762] MyToken::approve(NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], 100000000000000000000 [1e20])
    │   ├─ emit Approval(owner: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, spender: NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], value: 100000000000000000000 [1e20])
    │   └─ ← [Return] true
    ├─ [27119] MyERC721NFT::approve(NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], 0)
    │   ├─ emit Approval(owner: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], approved: NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], tokenId: 0)
    │   └─ ← [Stop] 
    ├─ [109143] NftMarket::list(0, 10)
    │   ├─ [642] MyERC721NFT::ownerOf(0) [staticcall]
    │   │   └─ ← [Return] TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496]
    │   ├─ [36428] MyERC721NFT::transferFrom(TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], 0)
    │   │   ├─ emit Transfer(from: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], to: NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], tokenId: 0)
    │   │   └─ ← [Stop] 
    │   ├─ emit NFTListed(nftId: 0, seller: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], price: 10)
    │   └─ ← [Stop] 
    ├─ [0] VM::prank(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266)
    │   └─ ← [Return] 
    ├─ [59922] NftMarket::permitBuy(0, 100000000000000000000 [1e20], 3601, 0, 27, 0x11e0c9edb80fb70b9f82bf0e054021c0bbd189092359b54649bc45768b989bd5, 0x0ca37d427faa3e1d3ee205b155615a53a59ebe5ac6766e3feac8762399fe69a9)
    │   ├─ [3000] PRECOMPILES::ecrecover(0x4997d093a5fcb84acb0bb5ed760ffb5cbbc22b0bc51b12167024bc76dc16c7c3, 27, 8086485828332878161921962109266812842617165044091463639110397138842307566549, 5716614765652596957947115764396136504266486712513789449849071906677002758569) [staticcall]
    │   │   └─ ← [Return] 0x0000000000000000000000007c8999dc9a822c1f0df42023113edb4fdd543266
    │   ├─ [26085] MyToken::transferFrom(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], 100000000000000000000 [1e20])
    │   │   ├─ emit Transfer(from: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, to: NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   ├─ [26315] MyERC721NFT::transferFrom(NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, 0)
    │   │   ├─ emit Transfer(from: NftMarket: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9], to: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, tokenId: 0)
    │   │   └─ ← [Stop] 
    │   └─ ← [Stop] 
    ├─ [642] MyERC721NFT::ownerOf(0) [staticcall]
    │   └─ ← [Return] 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266
    ├─ [0] VM::assertEq(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_PermitDeposit() (gas: 285367)
Traces:
  [4221955] TokenBankTest::setUp()
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266
    ├─ [979929] → new MyToken@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], value: 1000000000000000000000000 [1e24])
    │   └─ ← [Return] 4310 bytes of code
    ├─ [432798] → new TokenBank@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   └─ ← [Return] 2050 bytes of code
    ├─ [1075725] → new MyERC721NFT@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   └─ ← [Return] 5037 bytes of code
    ├─ [182251] MyERC721NFT::mintNFT("https://sapphire-familiar-toucan-190.mypinata.cloud/ipfs/QmWoSUtP6FLVTqfAcBd7RVjNwfVdGAtaUqYDTEsK3LGgyi")
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], tokenId: 0)
    │   ├─ emit MetadataUpdate(_tokenId: 0)
    │   └─ ← [Return] 0
    ├─ [1250014] → new NftMarket@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 5896 bytes of code
    ├─ [25144] MyToken::transfer(ECRecover: [0x0000000000000000000000000000000000000001], 1000000000000000000000 [1e21])
    │   ├─ emit Transfer(from: TokenBankTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], to: ECRecover: [0x0000000000000000000000000000000000000001], value: 1000000000000000000000 [1e21])
    │   └─ ← [Return] true
    └─ ← [Stop] 

  [361974] TokenBankTest::test_PermitDeposit()
    ├─ [222] MyToken::decimals() [staticcall]
    │   └─ ← [Return] 18
    ├─ [2616] MyToken::nonces(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::deal(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, 1000000000000000000000 [1e21])
    │   └─ ← [Return] 
    ├─ [2651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   └─ ← [Return] [0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b], []
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], slot: 96242371873675982092976041874824211260794571421386197087839202485518554500971 [9.624e76])
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff)
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0x0000000000000000000000000000000000000000000000000000000000000000)
    │   └─ ← [Return] 
    ├─ emit SlotFound(who: MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], fsig: 0x70a08231, keysHash: 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, slot: 96242371873675982092976041874824211260794571421386197087839202485518554500971 [9.624e76])
    ├─ [0] VM::load(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(MyToken: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd4c740891b19031cdceb36187d74e34c87b0d7af8a0a07377b79b265d3b60f6b, 0x0000000000000000000000000000000000000000000000056bc75e2d63100000)
    │   └─ ← [Return] 
    ├─ [651] MyToken::balanceOf(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 100000000000000000000 [1e20]
    ├─ [0] VM::prank(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266)
    │   └─ ← [Return] 
    ├─ [24762] MyToken::approve(TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 100000000000000000000 [1e20])
    │   ├─ emit Approval(owner: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, spender: TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 100000000000000000000 [1e20])
    │   └─ ← [Return] true
    ├─ [386] MyToken::DOMAIN_SEPARATOR() [staticcall]
    │   └─ ← [Return] 0x47133852c428439caec9902de2cb330e249f30b0e04964de018a0a7ba0b64781
    ├─ [0] VM::sign("<pk>", 0xb910bfe95300fa5141e94e6e988852173f838790cb0994e42c96a023c0739d7f) [staticcall]
    │   └─ ← [Return] 28, 0xcd73a3d9d3850be0a0a9c4b9d640e6531e4f5e62430c55bd7843934736207d88, 0x0cb6910a4f60e9f1509f33f9c597b6beb41f14d4acf58627829b85a0060378e0
    ├─ [0] VM::prank(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266)
    │   └─ ← [Return] 
    ├─ [80738] TokenBank::permitDeposit(100000000000000000000 [1e20], 86401 [8.64e4], 28, 0xcd73a3d9d3850be0a0a9c4b9d640e6531e4f5e62430c55bd7843934736207d88, 0x0cb6910a4f60e9f1509f33f9c597b6beb41f14d4acf58627829b85a0060378e0)
    │   ├─ [27462] MyToken::permit(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 100000000000000000000 [1e20], 86401 [8.64e4], 28, 0xcd73a3d9d3850be0a0a9c4b9d640e6531e4f5e62430c55bd7843934736207d88, 0x0cb6910a4f60e9f1509f33f9c597b6beb41f14d4acf58627829b85a0060378e0)
    │   │   ├─ [3000] PRECOMPILES::ecrecover(0xb910bfe95300fa5141e94e6e988852173f838790cb0994e42c96a023c0739d7f, 28, 92928452229257703102944940601867703392553600349848912762136431689389068811656, 5750321379968152994234026233912178408971984993866855601111397617227555633376) [staticcall]
    │   │   │   └─ ← [Return] 0x0000000000000000000000007c8999dc9a822c1f0df42023113edb4fdd543266
    │   │   ├─ emit Approval(owner: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, spender: TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Stop] 
    │   ├─ [26085] MyToken::transferFrom(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 100000000000000000000 [1e20])
    │   │   ├─ emit Transfer(from: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, to: TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   ├─ emit Deposit(sender: 0x7c8999dC9a822c1f0Df42023113EDB4FDd543266, value: 100000000000000000000 [1e20])
    │   └─ ← [Stop] 
    ├─ [651] MyToken::balanceOf(TokenBank: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   └─ ← [Return] 100000000000000000000 [1e20]
    ├─ [0] VM::assertEq(100000000000000000000 [1e20], 100000000000000000000 [1e20]) [staticcall]
    │   └─ ← [Return] 
    ├─ [474] TokenBank::balances(0x7c8999dC9a822c1f0Df42023113EDB4FDd543266) [staticcall]
    │   └─ ← [Return] 100000000000000000000 [1e20]
    ├─ [0] VM::assertEq(100000000000000000000 [1e20], 100000000000000000000 [1e20]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Stop] 